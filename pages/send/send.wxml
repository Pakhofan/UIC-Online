<!--pages/send/send.wxml-->
<view>
  <view class='card'>
    <view class='topRightContainer'>
    </view>
    <view wx:if="{{!hasUserInfo && canIUse}}" class='getUserInfoButtonContainer'>
      <button class='getUserInfoButton' open-type="getUserInfo" bindgetuserinfo="getUserInfo"> 获取头像昵称 </button>
    </view>

    <block wx:else>
      <view class="headContainer">
        <image class="headPic" mode='aspectFill' src="{{userInfo.avatarUrl}}"></image>
      </view>
      <view class="headRightContainer">
        <view bindtap='viewProfile' class="name">{{userInfo.nickName}}</view>
        <view class="date">即将发布</view>
      </view>
    </block>

    <view class="contentContainer">
      <view class="text">
        <textarea selectable="true" placeholder='输入要发送的内容...' value='{{text}}' maxlength='500' auto-height='ture' cursor-spacing='100' bindinput='userInput'></textarea>

        <view class="weui-uploader__info" style='margin-top:5px;width:100%;text-align:end;'>{{text.length}}/500</view>
      </view>
      <view class="pictureContainer">
        <view class="weui-uploader">
          <view class="weui-uploader__hd">
            <view class="weui-uploader__info">{{files.length}}/6</view>
          </view>
          <view class="weui-uploader__bd">
            <view class="weui-uploader__files" id="uploaderFiles">
              <block wx:for="{{files}}" wx:key="*this">
                <view class="weui-uploader__file" bindtap="previewImage" id="{{item}}">
                  <image class="weui-uploader__img" src="{{item}}" mode="aspectFill" />
                </view>
              </block>
            </view>
            <view class="weui-uploader__input-box" style='display:{{uploaderDisplay}}'>
              <view class="weui-uploader__input" bindtap="chooseImage"></view>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
  <view class='card'>
  
  </view>
  <button class='buttonA' wx:if="{{hasUserInfo && ((text.length > 0)|| files.length > 0)}}" id='sendButton' catchtap="onSendTap">发布</button>
  <button class='buttonB' wx:else id='sendButton'>发布</button>
</view>